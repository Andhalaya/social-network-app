import{r as v,i as p,j as e,u as y,a as M,c as o,B as m,b as c,A as z,S as P,D as I}from"./index-DGTewU9Y.js";import{d as D}from"./Search-CYh7I3MX.js";var l={},E=p;Object.defineProperty(l,"__esModule",{value:!0});var j=l.default=void 0,B=E(v()),L=e;j=l.default=(0,B.default)((0,L.jsx)("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4M2 18v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4s-8 1.34-8 4m16-8h4c.55 0 1 .45 1 1s-.45 1-1 1h-4c-.55 0-1-.45-1-1s.45-1 1-1"}),"PersonRemoveRounded");var d={},O=p;Object.defineProperty(d,"__esModule",{value:!0});var g=d.default=void 0,q=O(v()),k=e;g=d.default=(0,q.default)((0,k.jsx)("path",{d:"M20 9V6h-2v3h-3v2h3v3h2v-3h3V9zM9 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m6.39 8.56C13.71 13.7 11.53 13 9 13s-4.71.7-6.39 1.56C1.61 15.07 1 16.1 1 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66M15 18H3v-.78c0-.38.2-.72.52-.88C4.71 15.73 6.63 15 9 15c2.37 0 4.29.73 5.48 1.34.32.16.52.5.52.88z"}),"PersonAddAltOutlined");function W({type:a}){const{theme:_}=y(),{token:u,user:i,friends:w,setUser:S}=M(),[h,x]=o.useState([]),[n,N]=o.useState(""),[f,$]=o.useState(!1);o.useEffect(()=>{C()},[f]);const C=async()=>{try{const s=await m.get(`${c}/users`,{headers:{Authorization:`Bearer ${u}`}});a==="home"?x(s.data):a==="profile"&&x(w)}catch(s){console.error("Error fetching users:",s)}},R=s=>{N(s.target.value)},b=async s=>{try{const t=await m.patch(`${c}/users/follow/${s._id}`,{userId:i._id},{headers:{Authorization:`Bearer ${u}`}});console.log(t.data),S(t.data.user)}catch(t){console.error("Error toggling follow:",t)}};let r;a==="home"?(r=h.filter(s=>s.userName.toLowerCase().includes(n.toLowerCase())),r=r.sort(()=>.5-Math.random()).slice(0,4)):a==="profile"&&(r=h.filter(s=>i.friends.includes(s._id)&&s.userName.toLowerCase().includes(n.toLowerCase())));const A=()=>{$(!f)};return e.jsx("div",{className:"friends",children:e.jsxs(z,{children:[e.jsxs("div",{className:"space-between margin-bottom",children:[e.jsxs("div",{className:"inline-left gap",children:[e.jsx("h3",{className:"color",style:{fontWeight:"500"},children:"Lazy Coders"}),a==="home"&&e.jsx("div",{onClick:A,children:e.jsx(P,{})})]}),e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:"search user",style:{width:"75px"},value:n,onChange:R}),e.jsx(D,{className:`icon ${_}`,style:{width:"20px",marginRight:"10px"}})]})]}),e.jsx(I,{}),r.map(s=>e.jsxs("div",{className:"space-between",children:[e.jsxs("div",{className:"inline-left gap",children:[e.jsx("img",{src:`${c}/public/${s.profilePicture}`,alt:"name",style:{borderRadius:40,width:"40px"}}),e.jsxs("div",{className:"column",children:[e.jsx("h4",{children:`@${s.userName}`}),e.jsx("h6",{style:{fontWeight:"400",fontSize:"12px"},children:s.fullName}),e.jsx("h6",{style:{fontWeight:"400",fontSize:"12px"},children:s.occupation})]})]}),e.jsx("button",{className:"follow-btn",onClick:()=>b(s),children:i.friends.includes(s._id)?e.jsx(j,{sx:{fontSize:"25px"}}):e.jsx(g,{sx:{fontSize:"25px"}})})]},s._id))]})})}export{W as default};
