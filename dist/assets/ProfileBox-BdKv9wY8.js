import{u as v,a as P,r as i,j as a,A as $,b as u,J as C,E}from"./index-BQKPxvgF.js";import{a as S}from"./index-BxwEzTEs.js";function H(){const{theme:s}=v(),{token:d,user:t}=P(),[o,r]=i.useState(!1),[c,x]=i.useState(null),[p,h]=i.useState(t.profilePicture),[n,g]=i.useState({id:t._id,fullName:t.fullName,userName:t.userName,email:t.email,location:t.location,occupation:t.occupation,gitHub:t.gitHub}),f=()=>{r(e=>!e)},m=e=>{const{name:l,value:N}=e.target;g(y=>({...y,[l]:N}))},j=async()=>{try{const e=new FormData;e.append("id",t._id),e.append("fullName",n.fullName),e.append("email",n.email),e.append("location",n.location),e.append("occupation",n.occupation),e.append("gitHub",n.gitHub),c&&e.append("profilePicture",c);const l=await E.patch(`${u}/users/profile`,e,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"multipart/form-data"}});h(l.data.profilePicture),r(!1)}catch(e){console.error("Error updating profile:",e)}},b=[{name:"fullName",label:"Full Name",type:"text"},{name:"email",label:"Email",type:"email"},{name:"location",label:"Location",type:"text"},{name:"occupation",label:"Occupation",type:"text"},{name:"gitHub",label:"GitHub",type:"text",link:!0}];return a.jsx($,{children:a.jsxs("div",{className:"profile-box }",children:[a.jsx("div",{className:"user-img",children:a.jsx("img",{src:`${u}/public/${p||"uploads/default.jpg"}`,alt:"name"})}),a.jsxs("div",{className:"space-between margin-bottom",children:[a.jsxs("p",{className:`poppins h4 bold ${s}`,children:["@",`${t.userName}`]}),a.jsx("div",{onClick:f,children:o?a.jsx(C,{className:`icon ${s}`,onClick:j}):a.jsx(S,{className:`icon ${s}`})})]}),b.map(e=>a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsxs("p",{children:[e.label,":"]}),o?e.link?a.jsx("input",{className:"profile-input",type:e.type,name:e.name,value:n[e.name],onChange:m}):a.jsx("input",{className:"profile-input",type:e.type,name:e.name,value:n[e.name],onChange:m}):e.link?a.jsx("a",{href:n[e.name],children:n[e.name]}):a.jsx("p",{className:`typography2 ${s}`,children:n[e.name]})]},e.name)),o&&a.jsxs("div",{children:[a.jsx("p",{children:"Change Profile Picture"}),a.jsx("input",{type:"file",name:"profilePicture",onChange:e=>{x(e.target.files[0])}})]})]})})}export{H as default};
