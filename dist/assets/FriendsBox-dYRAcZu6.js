import{G as x,u as $,a as S,r as o,E as f,b as c,j as s,A as z,S as A,H as C}from"./index-BQKPxvgF.js";function b(a){return x({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M11 6a3 3 0 11-6 0 3 3 0 016 0zM14 17a6 6 0 00-12 0h12zM13 8a1 1 0 100 2h4a1 1 0 100-2h-4z"},child:[]}]})(a)}function M(a){return x({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"},child:[]}]})(a)}function E({type:a}){const{theme:r}=$(),{token:l,user:i,friends:p,setUser:g}=S(),[d,h]=o.useState([]),[u,k]=o.useState(""),[m,j]=o.useState(!1);o.useEffect(()=>{w()},[m]);const w=async()=>{try{const e=await f.get(`${c}/users`,{headers:{Authorization:`Bearer ${l}`}});a==="home"?h(e.data):a==="profile"&&h(p)}catch(e){console.error("Error fetching users:",e)}},N=async e=>{try{const n=await f.patch(`${c}/users/follow/${e._id}`,{userId:i._id},{headers:{Authorization:`Bearer ${l}`}});g(n.data.user)}catch(n){console.error("Error toggling follow:",n)}};let t;a==="home"?(t=d.filter(e=>e.userName.toLowerCase().includes(u.toLowerCase())),t=t.sort(()=>.5-Math.random()).slice(0,4)):a==="profile"&&(t=d.filter(e=>i.friends.includes(e._id)&&e.userName.toLowerCase().includes(u.toLowerCase())));const v=()=>{j(!m)};return s.jsx("div",{className:"friends",children:s.jsxs(z,{children:[s.jsxs("div",{className:"space-between margin-bottom",children:[s.jsxs("div",{className:"inline-left gap",children:[s.jsx("p",{className:"inder h4",children:"LAZY CODERS"}),a==="home"&&s.jsx("div",{onClick:v,children:s.jsx(A,{})})]}),s.jsx(C,{className:`icon white ${r}`})]}),t.map(e=>s.jsxs("div",{className:"space-between margin-top",children:[s.jsxs("div",{className:"inline-left gap",children:[s.jsx("img",{src:`${c}/public/${e.profilePicture}`,alt:"name",style:{borderRadius:40,width:"40px"}}),s.jsxs("div",{className:"column",children:[s.jsx("p",{className:`typography3 ${r}`,children:e.fullName}),s.jsx("p",{className:`typography4 ${r}`,children:e.occupation})]})]}),s.jsx("button",{className:"follow-btn",onClick:()=>N(e),children:i.friends.includes(e._id)?s.jsx(b,{className:`icon orange ${r}`,style:{fontSize:"30px"}}):s.jsx(M,{className:`icon ${r}`,style:{fontSize:"30px"}})})]},e._id))]})})}export{E as default};
