import{r as S,i as I,j as a,u as D,a as _,c as s,A as E,C as P,B as k,b as A}from"./index-DGTewU9Y.js";var l={},B=I;Object.defineProperty(l,"__esModule",{value:!0});var d=l.default=void 0,F=B(S()),R=a;d=l.default=(0,F.default)((0,R.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");function q(){D();const{token:h,user:n,setUser:x}=_(),[o,i]=s.useState(!1),[g,c]=s.useState(!1),[u,T]=s.useState(null),[t,f]=s.useState({id:n._id,fullName:n.fullName,userName:n.userName,email:n.email,location:n.location,occupation:n.occupation,github:n.github}),[j,m]=s.useState(!1),v=()=>{i(e=>!e),c(!0)},p=e=>{const{name:r,value:y}=e.target;f(C=>({...C,[r]:y})),m(!0)},b=async()=>{try{if(!j)return;const e=new FormData;e.append("id",t.id),e.append("fullName",t.fullName),e.append("userName",t.userName),e.append("email",t.email),e.append("location",t.location),e.append("occupation",t.occupation),e.append("github",t.github),u&&e.append("profilePicture",u);const r=await k.patch(`${A}/users/profile`,e,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"multipart/form-data"}});m(!1),i(!1),c(!1),x(r.data.user)}catch(e){console.error("Error updating profile:",e)}},N=[{name:"fullName",label:"Full Name",type:"text"},{name:"email",label:"Email",type:"email"},{name:"location",label:"Location",type:"text"},{name:"occupation",label:"Occupation",type:"text"},{name:"github",label:"GitHub",type:"text",link:!0}];return a.jsx(E,{children:a.jsxs("div",{className:"profile-box }",children:[a.jsxs("div",{className:"space-between margin-bottom",children:[a.jsx("h4",{children:`@${n.userName}`}),a.jsx("div",{onClick:v,children:o?a.jsx(d,{className:"icon",onClick:b}):a.jsx(P,{className:"icon"})})]}),N.map(e=>a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsx("p",{children:a.jsxs("strong",{children:[e.label,":"]})}),o?e.link?a.jsx("input",{type:e.type,name:e.name,value:t[e.name],onChange:p}):a.jsx("input",{type:e.type,name:e.name,value:t[e.name],onChange:p}):e.link?a.jsx("a",{href:t[e.name],children:t[e.name]}):a.jsx("span",{children:t[e.name]})]},e.name)),o&&g&&a.jsxs("div",{children:[a.jsx("p",{children:a.jsx("strong",{children:"Change Profile Picture"})}),a.jsx("input",{type:"file",name:"profilePicture",onChange:e=>{setImage(e.target.files[0])}})]})]})})}export{q as default};
