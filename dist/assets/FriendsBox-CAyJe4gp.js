import{G as f,u as $,a as S,f as t,Y as x,b as c,j as e,A,$ as z,Z as C}from"./index-CzoMMD5v.js";import{a as M}from"./index-D7E9AwmE.js";function b(a){return f({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M11 6a3 3 0 11-6 0 3 3 0 016 0zM14 17a6 6 0 00-12 0h12zM13 8a1 1 0 100 2h4a1 1 0 100-2h-4z"},child:[]}]})(a)}function k(a){return f({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"},child:[]}]})(a)}function R({type:a,onClick:B}){const{theme:r}=$(),{token:l,user:i,friends:p,setUser:g}=S(),[d,h]=t.useState([]),[u,E]=t.useState(""),[m,j]=t.useState(!1);t.useEffect(()=>{N()},[m]);const N=async()=>{try{const s=await x.get(`${c}/users`,{headers:{Authorization:`Bearer ${l}`}});a==="home"?h(s.data):(a==="profile"||a==="chat")&&h(p)}catch(s){console.error("Error fetching users:",s)}},v=async s=>{try{const n=await x.patch(`${c}/users/follow/${s._id}`,{userId:i._id},{headers:{Authorization:`Bearer ${l}`}});g(n.data.user)}catch(n){console.error("Error toggling follow:",n)}};let o;a==="home"||a==="chat"?(o=d.filter(s=>s.userName.toLowerCase().includes(u.toLowerCase())),o=o.sort(()=>.5-Math.random()).slice(0,4)):a==="profile"&&(o=d.filter(s=>i.friends.includes(s._id)&&s.userName.toLowerCase().includes(u.toLowerCase())));const w=()=>{j(!m)};return e.jsx("div",{className:"friends",children:e.jsxs(A,{children:[e.jsxs("div",{className:"space-between margin-bottom",children:[e.jsxs("div",{className:"inline-left gap",children:[e.jsx("p",{className:"inder h4",children:a==="home"||a==="chat"?"LAZY CODERS":"FRIENDS"}),(a==="home"||a==="chat")&&e.jsx("div",{onClick:w,children:e.jsx(z,{})})]}),e.jsx(C,{className:`icon white ${r}`})]}),o.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"15px 0px"},children:[" ",e.jsx("p",{children:"No friends yet!"})," "]}):o.map(s=>e.jsxs("div",{className:"space-between margin-top",children:[e.jsxs("div",{className:"inline-left gap",children:[e.jsx("img",{src:`${c}/public${s.profilePicture?s.profilePicture:"/uploads/default.jpg"}`,style:{borderRadius:40,width:"40px"}}),e.jsxs("div",{className:"column",children:[e.jsx("p",{className:`typography3 ${r}`,style:{cursor:"pointer"},children:s.fullName}),e.jsx("p",{className:`typography4 ${r}`,children:s.occupation})]})]}),(a==="home"||a==="profile")&&e.jsx("button",{className:"follow-btn",onClick:()=>v(s),children:i.friends.includes(s._id)?e.jsx(b,{className:`icon orange ${r}`,style:{fontSize:"30px"}}):e.jsx(k,{className:`icon ${r}`,style:{fontSize:"30px"}})}),a==="chat"&&e.jsx("div",{children:e.jsx(M,{className:`icon ${r}`,style:{fontSize:"30px"}})})]},s._id))]})})}export{R as default};
